CatalogInfo:
  description: Top-level catalog containing schemas, tables, and other data objects.
  type: object
  properties:
    name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    comment:
      type: string
      maxLength: 1024
      pattern: '[\s\S]+'
    created_at:
      type: string
      format: date-time
      maxLength: 64
    updated_at:
      type: string
      format: date-time
      maxLength: 64

SchemaDetail:
  description: Detailed information about a schema within a catalog.
  type: object
  properties:
    schema_id:
      type: string
      pattern: '^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$'
      maxLength: 36
    name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    catalog_name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    comment:
      type: string
      maxLength: 1024
      pattern: '[\s\S]+'
    properties:
      type: object
      additionalProperties:
        type: string
        maxLength: 255
        pattern: '[\s\S]+'
    owner:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    created_at:
      type: string
      format: date-time
      maxLength: 64
    updated_at:
      type: string
      format: date-time
      maxLength: 64
    tags:
      type: array
      items:
        $ref: 'governance.yaml#/Tag'
      maxItems: 100
    deleted_at:
      type: string
      format: date-time
      maxLength: 64
      nullable: true

CreateSchemaRequest:
  description: Request body for creating a new schema.
  type: object
  additionalProperties: false
  required: [name]
  properties:
    name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    comment:
      type: string
      maxLength: 1024
      pattern: '[\s\S]+'
    properties:
      type: object
      additionalProperties:
        type: string
        maxLength: 255
        pattern: '[\s\S]+'
    location_name:
      type: string
      description: Optional external location name to use for schema storage path.
      maxLength: 2048
      pattern: '^\S.*$'

UpdateSchemaRequest:
  description: Request body for updating an existing schema.
  type: object
  additionalProperties: false
  properties:
    comment:
      type: string
      maxLength: 1024
      pattern: '[\s\S]+'
    properties:
      type: object
      additionalProperties:
        type: string
        maxLength: 255
        pattern: '[\s\S]+'

UpdateTableRequest:
  description: Request body for updating an existing table.
  type: object
  additionalProperties: false
  properties:
    comment:
      type: string
      maxLength: 1024
      pattern: '[\s\S]+'
    properties:
      type: object
      additionalProperties:
        type: string
        maxLength: 255
        pattern: '[\s\S]+'
    owner:
      type: string
      maxLength: 255
      pattern: '^\S.*$'

PaginatedSchemaDetails:
  description: Paginated list of schema details.
  type: object
  properties:
    data:
      type: array
      items:
        $ref: '#/SchemaDetail'
      maxItems: 1000
    next_page_token:
      type: string
      maxLength: 4096
      pattern: '^\S+$'

TableDetail:
  description: Detailed information about a table including its columns and metadata.
  type: object
  properties:
    table_id:
      type: string
      pattern: '^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$'
      maxLength: 36
    name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    schema_name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    catalog_name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    table_type:
      type: string
      maxLength: 64
      pattern: '^\S+$'
    columns:
      type: array
      items:
        $ref: '#/ColumnDetail'
      maxItems: 10000
    comment:
      type: string
      maxLength: 1024
      pattern: '[\s\S]+'
    properties:
      type: object
      additionalProperties:
        type: string
        maxLength: 255
        pattern: '[\s\S]+'
    owner:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    created_at:
      type: string
      format: date-time
      maxLength: 64
    updated_at:
      type: string
      format: date-time
      maxLength: 64
    tags:
      type: array
      items:
        $ref: 'governance.yaml#/Tag'
      maxItems: 100
    statistics:
      $ref: '#/TableStatistics'
    deleted_at:
      type: string
      format: date-time
      maxLength: 64
      nullable: true
    storage_path:
      type: string
      description: Resolved DuckLake data path for MANAGED tables.
      maxLength: 2048
      pattern: '^\S.*$'
    source_path:
      type: string
      description: S3/storage path for EXTERNAL tables.
      maxLength: 2048
      pattern: '^\S.*$'
    file_format:
      type: string
      description: File format for EXTERNAL tables (parquet or csv).
      maxLength: 64
      pattern: '^\S+$'
    location_name:
      type: string
      description: External location name for EXTERNAL tables.
      maxLength: 2048
      pattern: '^\S.*$'

ColumnDetail:
  description: Detailed information about a single column in a table.
  type: object
  properties:
    name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    type:
      type: string
      maxLength: 64
      pattern: '^\S+$'
    position:
      type: integer
      format: int32
      minimum: 0
      maximum: 10000
    nullable:
      type: boolean
      description: Whether the column allows NULL values.
    comment:
      type: string
      maxLength: 1024
      pattern: '[\s\S]+'
    properties:
      type: object
      additionalProperties:
        type: string
        maxLength: 255
        pattern: '[\s\S]+'

CreateTableRequest:
  description: Request body for creating a new table (managed or external).
  type: object
  additionalProperties: false
  required: [name]
  properties:
    name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    columns:
      type: array
      items:
        $ref: '#/CreateColumnRequest'
      description: Required for MANAGED tables; auto-discovered for EXTERNAL if omitted.
      maxItems: 10000
    comment:
      type: string
      maxLength: 1024
      pattern: '[\s\S]+'
    table_type:
      type: string
      enum: [MANAGED, EXTERNAL]
      default: MANAGED
      description: Type of table. MANAGED (default) or EXTERNAL.
    source_path:
      type: string
      description: S3/storage path to the data file(s). Required for EXTERNAL tables.
      maxLength: 2048
      pattern: '^\S.*$'
    file_format:
      type: string
      enum: [parquet, csv]
      default: parquet
      description: File format of the external data. Required for EXTERNAL tables.
    location_name:
      type: string
      description: Name of the external location that owns the source path. Required for EXTERNAL tables.
      maxLength: 2048
      pattern: '^\S.*$'

CreateColumnRequest:
  description: Request body for defining a column when creating a table.
  type: object
  additionalProperties: false
  required: [name, type]
  properties:
    name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    type:
      type: string
      maxLength: 64
      pattern: '^\S+$'

UpdateColumnRequest:
  description: Request body for updating column metadata.
  type: object
  additionalProperties: false
  properties:
    comment:
      type: string
      maxLength: 1024
      pattern: '[\s\S]+'
    properties:
      type: object
      additionalProperties:
        type: string
        maxLength: 255
        pattern: '[\s\S]+'

PaginatedTableDetails:
  description: Paginated list of table details.
  type: object
  properties:
    data:
      type: array
      items:
        $ref: '#/TableDetail'
      maxItems: 1000
    next_page_token:
      type: string
      maxLength: 4096
      pattern: '^\S+$'

PaginatedColumnDetails:
  description: Paginated list of column details.
  type: object
  properties:
    data:
      type: array
      items:
        $ref: '#/ColumnDetail'
      maxItems: 1000
    next_page_token:
      type: string
      maxLength: 4096
      pattern: '^\S+$'

TableStatistics:
  description: Statistical metadata about a table's size and profiling status.
  type: object
  properties:
    row_count:
      type: integer
      format: int64
      nullable: true
      minimum: 0
      maximum: 9223372036854775807
    size_bytes:
      type: integer
      format: int64
      nullable: true
      minimum: 0
      maximum: 9223372036854775807
    column_count:
      type: integer
      format: int64
      nullable: true
      minimum: 0
      maximum: 9223372036854775807
    last_profiled_at:
      type: string
      format: date-time
      maxLength: 64
      nullable: true
    profiled_by:
      type: string
      maxLength: 255
      pattern: '^\S.*$'

MetastoreSummary:
  description: Summary information about the metastore including catalog and storage details.
  type: object
  properties:
    catalog_name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    metastore_type:
      type: string
      maxLength: 64
      pattern: '^\S+$'
    storage_backend:
      type: string
      maxLength: 64
      pattern: '^\S+$'
    data_path:
      type: string
      maxLength: 2048
      pattern: '^\S.*$'
    schema_count:
      type: integer
      format: int64
      minimum: 0
      maximum: 9223372036854775807
    table_count:
      type: integer
      format: int64
      minimum: 0
      maximum: 9223372036854775807

ViewDetail:
  description: Detailed information about a view including its definition and source tables.
  type: object
  properties:
    id:
      type: string
      pattern: '^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$'
      maxLength: 36
    schema_id:
      type: string
      pattern: '^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$'
      maxLength: 36
    schema_name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    catalog_name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    view_definition:
      type: string
      maxLength: 65536
      pattern: '[\s\S]+'
    comment:
      type: string
      nullable: true
      maxLength: 1024
      pattern: '[\s\S]+'
    properties:
      type: object
      additionalProperties:
        type: string
        maxLength: 255
        pattern: '[\s\S]+'
    owner:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    source_tables:
      type: array
      items:
        type: string
        maxLength: 255
        pattern: '^\S.*$'
      maxItems: 1000
    created_at:
      type: string
      format: date-time
      maxLength: 64
    updated_at:
      type: string
      format: date-time
      maxLength: 64

CreateViewRequest:
  description: Request body for creating a new view.
  type: object
  additionalProperties: false
  required: [name, view_definition]
  properties:
    name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    view_definition:
      type: string
      maxLength: 65536
      pattern: '[\s\S]+'
    comment:
      type: string
      maxLength: 1024
      pattern: '[\s\S]+'

UpdateViewRequest:
  description: Request body for updating an existing view.
  type: object
  additionalProperties: false
  properties:
    comment:
      type: string
      maxLength: 1024
      pattern: '[\s\S]+'
    properties:
      type: object
      additionalProperties:
        type: string
        maxLength: 255
        pattern: '[\s\S]+'
    view_definition:
      type: string
      maxLength: 65536
      pattern: '[\s\S]+'

PaginatedViewDetails:
  description: Paginated list of view details.
  type: object
  properties:
    data:
      type: array
      items:
        $ref: '#/ViewDetail'
      maxItems: 1000
    next_page_token:
      type: string
      maxLength: 4096
      pattern: '^\S+$'

VolumeDetail:
  description: Detailed information about a storage volume.
  type: object
  properties:
    id:
      type: string
      pattern: '^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$'
      maxLength: 36
    name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    schema_name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    catalog_name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    volume_type:
      type: string
      enum: [MANAGED, EXTERNAL]
    storage_location:
      type: string
      maxLength: 2048
      pattern: '^\S.*$'
    comment:
      type: string
      maxLength: 1024
      pattern: '[\s\S]+'
    owner:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    created_at:
      type: string
      format: date-time
      maxLength: 64
    updated_at:
      type: string
      format: date-time
      maxLength: 64

CreateVolumeRequest:
  description: Request body for creating a new volume.
  type: object
  additionalProperties: false
  required: [name, volume_type]
  properties:
    name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    volume_type:
      type: string
      enum: [MANAGED, EXTERNAL]
    storage_location:
      type: string
      description: Required for EXTERNAL volumes. Ignored for MANAGED.
      maxLength: 2048
      pattern: '^\S.*$'
    comment:
      type: string
      maxLength: 1024
      pattern: '[\s\S]+'

UpdateVolumeRequest:
  description: Request body for updating an existing volume.
  type: object
  additionalProperties: false
  properties:
    new_name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    comment:
      type: string
      maxLength: 1024
      pattern: '[\s\S]+'
    owner:
      type: string
      maxLength: 255
      pattern: '^\S.*$'

PaginatedVolumes:
  description: Paginated list of volumes.
  type: object
  properties:
    data:
      type: array
      items:
        $ref: '#/VolumeDetail'
      maxItems: 1000
    next_page_token:
      type: string
      maxLength: 4096
      pattern: '^\S+$'

CatalogRegistration:
  description: Registration details for a DuckLake catalog.
  type: object
  required: [name, metastore_type, dsn, data_path, status]
  properties:
    id:
      type: string
      pattern: '^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$'
      maxLength: 36
    name:
      type: string
      description: DuckDB catalog alias, used in SQL as catalog.schema.table
      maxLength: 255
      pattern: '^\S+$'
    metastore_type:
      type: string
      enum: [sqlite, postgres]
      description: Type of metastore backend
      maxLength: 64
    dsn:
      type: string
      description: File path (sqlite) or connection string (postgres)
      maxLength: 2048
      pattern: '^\S.*$'
    data_path:
      type: string
      description: Data path (s3://bucket/path/ or local path)
      maxLength: 2048
      pattern: '^\S.*$'
    status:
      type: string
      enum: [ACTIVE, ERROR, DETACHED]
      maxLength: 64
    status_message:
      type: string
      maxLength: 1024
      pattern: '[\s\S]+'
    is_default:
      type: boolean
    comment:
      type: string
      maxLength: 1024
      pattern: '[\s\S]+'
    created_at:
      type: string
      format: date-time
      maxLength: 64
    updated_at:
      type: string
      format: date-time
      maxLength: 64

CreateCatalogRequest:
  description: Request body for registering a new catalog.
  type: object
  additionalProperties: false
  required: [name, metastore_type, dsn, data_path]
  properties:
    name:
      type: string
      maxLength: 255
      pattern: '^\S+$'
    metastore_type:
      type: string
      enum: [sqlite, postgres]
      maxLength: 64
    dsn:
      type: string
      maxLength: 2048
      pattern: '^\S.*$'
    data_path:
      type: string
      maxLength: 2048
      pattern: '^\S.*$'
    comment:
      type: string
      maxLength: 1024
      pattern: '[\s\S]+'

UpdateCatalogRegistrationRequest:
  description: Request body for updating a catalog registration.
  type: object
  additionalProperties: false
  properties:
    comment:
      type: string
      maxLength: 1024
      pattern: '[\s\S]+'
    data_path:
      type: string
      maxLength: 2048
      pattern: '^\S.*$'
    dsn:
      type: string
      maxLength: 2048
      pattern: '^\S.*$'

CatalogRegistrationList:
  description: Paginated list of catalog registrations.
  type: object
  properties:
    catalogs:
      type: array
      items:
        $ref: '#/CatalogRegistration'
      maxItems: 1000
    next_page_token:
      type: string
      maxLength: 4096
      pattern: '^\S+$'
    total_count:
      type: integer
      format: int64
      minimum: 0
      maximum: 9223372036854775807

SetDefaultCatalogRequest:
  description: Empty object, the catalog name is in the URL path.
  type: object
  additionalProperties: false

ComputeEndpoint:
  description: A compute endpoint representing a DuckDB execution environment, either local or remote.
  type: object
  properties:
    id:
      type: string
      pattern: '^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$'
      maxLength: 36
      example: "550e8400-e29b-41d4-a716-446655440000"
    external_id:
      type: string
      pattern: '^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$'
      maxLength: 36
      example: "550e8400-e29b-41d4-a716-446655440000"
    name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
      example: my-resource
    url:
      type: string
      maxLength: 2048
      format: uri
      example: https://example.com/resource
    type:
      type: string
      enum: [LOCAL, REMOTE]
      example: LOCAL
    status:
      type: string
      enum: [ACTIVE, INACTIVE, STARTING, STOPPING, ERROR]
      example: ACTIVE
    size:
      type: string
      enum: [SMALL, MEDIUM, LARGE]
      example: SMALL
    max_memory_gb:
      type: integer
      format: int64
      minimum: 0
      maximum: 9223372036854775807
      example: 100
    owner:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
      example: alice
    created_at:
      type: string
      format: date-time
      maxLength: 64
      example: '2025-01-15T10:30:00Z'
    updated_at:
      type: string
      format: date-time
      maxLength: 64
      example: '2025-01-15T10:30:00Z'

CreateComputeEndpointRequest:
  description: Request payload for creating a new compute endpoint.
  type: object
  additionalProperties: false
  required: [name, url, type]
  properties:
    name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
      example: my-resource
    url:
      type: string
      maxLength: 2048
      format: uri
      example: https://example.com/resource
    type:
      type: string
      enum: [LOCAL, REMOTE]
      example: LOCAL
    size:
      type: string
      enum: [SMALL, MEDIUM, LARGE]
      example: SMALL
    max_memory_gb:
      type: integer
      format: int64
      minimum: 0
      maximum: 9223372036854775807
      example: 100
    auth_token:
      type: string
      description: Pre-shared secret for remote agent authentication.
      maxLength: 512
      pattern: '^\S+$'
      example: ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

UpdateComputeEndpointRequest:
  description: Request payload for updating an existing compute endpoint.
  type: object
  additionalProperties: false
  properties:
    url:
      type: string
      maxLength: 2048
      format: uri
      example: https://example.com/resource
    size:
      type: string
      enum: [SMALL, MEDIUM, LARGE]
      example: SMALL
    max_memory_gb:
      type: integer
      format: int64
      minimum: 0
      maximum: 9223372036854775807
      example: 100
    auth_token:
      type: string
      maxLength: 512
      pattern: '^\S+$'
      example: ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    status:
      type: string
      enum: [ACTIVE, INACTIVE, STARTING, STOPPING, ERROR]
      example: ACTIVE

PaginatedComputeEndpoints:
  description: A paginated list of compute endpoints.
  type: object
  properties:
    data:
      type: array
      maxItems: 1000
      items:
        $ref: '#/ComputeEndpoint'
      example: []
    next_page_token:
      type: string
      maxLength: 4096
      pattern: '^\S+$'
      example: eyJpZCI6MTB9

ComputeAssignment:
  description: An assignment linking a principal (user or group) to a compute endpoint.
  type: object
  properties:
    id:
      type: string
      pattern: '^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$'
      maxLength: 36
      example: "550e8400-e29b-41d4-a716-446655440000"
    principal_id:
      type: string
      pattern: '^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$'
      maxLength: 36
      example: "550e8400-e29b-41d4-a716-446655440000"
    principal_type:
      type: string
      enum: [user, group]
      example: user
    endpoint_id:
      type: string
      pattern: '^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$'
      maxLength: 36
      example: "550e8400-e29b-41d4-a716-446655440000"
    endpoint_name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
      example: example-value
    is_default:
      type: boolean
      example: false
    fallback_local:
      type: boolean
      example: true
    created_at:
      type: string
      format: date-time
      maxLength: 64
      example: '2025-01-15T10:30:00Z'

CreateComputeAssignmentRequest:
  description: Request payload for creating a new compute assignment for a principal.
  type: object
  additionalProperties: false
  required: [principal_id, principal_type]
  properties:
    principal_id:
      type: string
      pattern: '^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$'
      maxLength: 36
      example: "550e8400-e29b-41d4-a716-446655440000"
    principal_type:
      type: string
      enum: [user, group]
      example: user
    is_default:
      type: boolean
      default: true
      example: false
    fallback_local:
      type: boolean
      default: false
      example: true

PaginatedComputeAssignments:
  description: A paginated list of compute assignments.
  type: object
  properties:
    data:
      type: array
      maxItems: 1000
      items:
        $ref: '#/ComputeAssignment'
      example: []
    next_page_token:
      type: string
      maxLength: 4096
      pattern: '^\S+$'
      example: eyJpZCI6MTB9

ComputeEndpointHealth:
  description: Health and resource usage information for a compute endpoint.
  type: object
  properties:
    status:
      type: string
      description: Health status (e.g. "ok")
      maxLength: 64
      pattern: '^\S+$'
      example: ACTIVE
    uptime_seconds:
      type: integer
      description: Agent uptime in seconds
      format: int32
      minimum: 0
      maximum: 2147483647
      example: 42
    duckdb_version:
      type: string
      description: DuckDB version running on the agent
      maxLength: 64
      pattern: '^\S+$'
      example: example-value
    memory_used_mb:
      type: integer
      description: Current memory usage in MB
      format: int32
      minimum: 0
      maximum: 2147483647
      example: 42
    max_memory_gb:
      type: integer
      description: Maximum memory limit in GB
      format: int32
      minimum: 0
      maximum: 2147483647
      example: 42
    endpoint_name:
      type: string
      description: Name of the compute endpoint
      maxLength: 255
      pattern: '^\S.*$'
      example: example-value

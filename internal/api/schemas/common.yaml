parameters:
  MaxResults:
    name: max_results
    in: query
    description: Maximum number of results to return per page.
    required: false
    schema:
      type: integer
      default: 100
      minimum: 1
      maximum: 1000
      format: int32
  PageToken:
    name: page_token
    in: query
    description: Opaque pagination token from a previous response.
    required: false
    schema:
      type: string
      maxLength: 4096
      pattern: '^\S+$'

Error:
  description: Standard error response returned by the API on failure.
  type: object
  required: [code, message]
  properties:
    code:
      type: integer
      minimum: 100
      maximum: 599
      format: int32
      example: 400
    message:
      type: string
      maxLength: 4096
      pattern: '[\s\S]+'
      example: "Invalid request: check the request body and parameters"

QueryRequest:
  description: A SQL query to execute against the analytics engine.
  type: object
  required: [sql]
  properties:
    sql:
      type: string
      maxLength: 65536
      pattern: '[\s\S]+'
      example: SELECT * FROM my_table LIMIT 10

QueryResult:
  description: The result set returned after executing a SQL query.
  type: object
  properties:
    columns:
      type: array
      maxItems: 10000
      items:
        type: string
        maxLength: 255
        pattern: '^\S.*$'
      example: ["id", "name", "value"]
    rows:
      type: array
      maxItems: 1000000
      items:
        type: array
        maxItems: 10000
        items: {}
      example: []
    row_count:
      type: integer
      minimum: 0
      maximum: 9223372036854775807
      format: int64
      example: 42
    next_page_token:
      type: string
      maxLength: 4096
      pattern: '^\S+$'

SubmitQueryRequest:
  description: Submit SQL for asynchronous execution.
  type: object
  required: [sql]
  properties:
    sql:
      type: string
      maxLength: 65536
      pattern: '[\s\S]+'
      example: SELECT * FROM my_table LIMIT 10
    request_id:
      type: string
      maxLength: 255
      pattern: '^\S+$'

SubmitQueryResponse:
  description: Asynchronous query submission accepted.
  type: object
  required: [query_id, status]
  properties:
    query_id:
      type: string
      maxLength: 64
      pattern: '^\S+$'
    status:
      type: string
      enum: [QUEUED, RUNNING, SUCCEEDED, FAILED, CANCELED]

QueryJob:
  description: Query lifecycle status and metadata.
  type: object
  required: [query_id, status, row_count]
  properties:
    query_id:
      type: string
      maxLength: 64
      pattern: '^\S+$'
    request_id:
      type: string
      maxLength: 255
      pattern: '^\S+$'
    status:
      type: string
      enum: [QUEUED, RUNNING, SUCCEEDED, FAILED, CANCELED]
    row_count:
      type: integer
      minimum: 0
      maximum: 9223372036854775807
      format: int64
    error:
      type: string
      maxLength: 4096
      pattern: '[\s\S]+'
    created_at:
      type: string
      format: date-time
    started_at:
      type: string
      format: date-time
    completed_at:
      type: string
      format: date-time

CancelQueryResponse:
  description: Response after query cancellation.
  type: object
  required: [query_id, status]
  properties:
    query_id:
      type: string
      maxLength: 64
      pattern: '^\S+$'
    status:
      type: string
      enum: [QUEUED, RUNNING, SUCCEEDED, FAILED, CANCELED]

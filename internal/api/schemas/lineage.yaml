LineageEdge:
  description: A directed edge representing a data dependency between two tables.
  type: object
  properties:
    id:
      type: integer
      format: int64
      minimum: 1
      maximum: 9223372036854775807
    source_table:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    target_table:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
      nullable: true
    source_schema:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
      description: Schema of the source table
    target_schema:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
      description: Schema of the target table
    edge_type:
      type: string
      maxLength: 64
      enum: [READ, WRITE, READ_WRITE]
      description: "Edge type: READ, WRITE, READ_WRITE"
    principal_name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    created_at:
      type: string
      format: date-time
      maxLength: 64

LineageNode:
  description: A table node in the lineage graph with its upstream and downstream edges.
  type: object
  properties:
    table_name:
      type: string
      maxLength: 255
      pattern: '^\S.*$'
    upstream:
      type: array
      maxItems: 10000
      items:
        $ref: '#/LineageEdge'
    downstream:
      type: array
      maxItems: 10000
      items:
        $ref: '#/LineageEdge'

PaginatedLineageEdges:
  description: A paginated list of lineage edges.
  type: object
  properties:
    data:
      type: array
      maxItems: 1000
      items:
        $ref: '#/LineageEdge'
    next_page_token:
      type: string
      maxLength: 4096
      pattern: '^\S+$'

PurgeLineageRequest:
  description: Request to delete lineage edges older than a specified number of days.
  type: object
  required: [older_than_days]
  properties:
    older_than_days:
      type: integer
      minimum: 1
      maximum: 3650
      format: int32
      description: Delete lineage edges older than this many days.

PurgeLineageResponse:
  description: Result of a lineage purge operation indicating how many edges were deleted.
  type: object
  properties:
    deleted_count:
      type: integer
      format: int64
      minimum: 0
      maximum: 9223372036854775807

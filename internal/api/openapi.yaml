openapi: "3.0.3"
info:
  title: DuckDB Data Platform API
  version: "3.0.0"
  description: |
    HTTP API for the DuckDB data platform with RBAC, RLS, column masking,
    and Unity Catalog-compatible catalog management.

servers:
  - url: /v1

security:
  - BearerAuth: []
  - ApiKeyAuth: []

tags:
  - name: Query
    description: Execute SQL queries against the platform.
  - name: Catalog
    description: Catalog, schema, table, column, and view management.
  - name: Ingestion
    description: Data ingestion via upload, commit, and external file loading.
  - name: Security
    description: Principals, groups, grants, row filters, and column masks.
  - name: Lineage
    description: Table lineage tracking and management.
  - name: Governance
    description: Tags, classifications, and catalog search.
  - name: Observability
    description: Audit logs, query history, and metastore summary.
  - name: Storage
    description: Storage credentials and external locations.
  - name: Manifest
    description: Client-side query manifest with presigned URLs.
  - name: Compute
    description: Compute endpoint and assignment management.

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key

  parameters:
    MaxResults:
      $ref: 'schemas/common.yaml#/parameters/MaxResults'
    PageToken:
      $ref: 'schemas/common.yaml#/parameters/PageToken'

  schemas:
    Error:
      $ref: 'schemas/common.yaml#/Error'
    QueryRequest:
      $ref: 'schemas/common.yaml#/QueryRequest'
    QueryResult:
      $ref: 'schemas/common.yaml#/QueryResult'
    Principal:
      $ref: 'schemas/security.yaml#/Principal'
    CreatePrincipalRequest:
      $ref: 'schemas/security.yaml#/CreatePrincipalRequest'
    UpdatePrincipalAdminRequest:
      $ref: 'schemas/security.yaml#/UpdatePrincipalAdminRequest'
    PaginatedPrincipals:
      $ref: 'schemas/security.yaml#/PaginatedPrincipals'
    Group:
      $ref: 'schemas/security.yaml#/Group'
    CreateGroupRequest:
      $ref: 'schemas/security.yaml#/CreateGroupRequest'
    GroupMember:
      $ref: 'schemas/security.yaml#/GroupMember'
    CreateGroupMemberRequest:
      $ref: 'schemas/security.yaml#/CreateGroupMemberRequest'
    PaginatedGroups:
      $ref: 'schemas/security.yaml#/PaginatedGroups'
    PaginatedGroupMembers:
      $ref: 'schemas/security.yaml#/PaginatedGroupMembers'
    PrivilegeGrant:
      $ref: 'schemas/security.yaml#/PrivilegeGrant'
    CreateGrantRequest:
      $ref: 'schemas/security.yaml#/CreateGrantRequest'
    PaginatedGrants:
      $ref: 'schemas/security.yaml#/PaginatedGrants'
    APIKeyInfo:
      $ref: 'schemas/security.yaml#/APIKeyInfo'
    CreateAPIKeyRequest:
      $ref: 'schemas/security.yaml#/CreateAPIKeyRequest'
    CreateAPIKeyResponse:
      $ref: 'schemas/security.yaml#/CreateAPIKeyResponse'
    PaginatedAPIKeys:
      $ref: 'schemas/security.yaml#/PaginatedAPIKeys'
    CleanupAPIKeysResponse:
      $ref: 'schemas/security.yaml#/CleanupAPIKeysResponse'
    RowFilter:
      $ref: 'schemas/security.yaml#/RowFilter'
    CreateRowFilterRequest:
      $ref: 'schemas/security.yaml#/CreateRowFilterRequest'
    RowFilterBindingRequest:
      $ref: 'schemas/security.yaml#/RowFilterBindingRequest'
    PaginatedRowFilters:
      $ref: 'schemas/security.yaml#/PaginatedRowFilters'
    ColumnMask:
      $ref: 'schemas/security.yaml#/ColumnMask'
    CreateColumnMaskRequest:
      $ref: 'schemas/security.yaml#/CreateColumnMaskRequest'
    ColumnMaskBindingRequest:
      $ref: 'schemas/security.yaml#/ColumnMaskBindingRequest'
    PaginatedColumnMasks:
      $ref: 'schemas/security.yaml#/PaginatedColumnMasks'
    AuditEntry:
      $ref: 'schemas/observability.yaml#/AuditEntry'
    PaginatedAuditLogs:
      $ref: 'schemas/observability.yaml#/PaginatedAuditLogs'
    ManifestRequest:
      $ref: 'schemas/observability.yaml#/ManifestRequest'
    ManifestColumn:
      $ref: 'schemas/observability.yaml#/ManifestColumn'
    ManifestResponse:
      $ref: 'schemas/observability.yaml#/ManifestResponse'
    CatalogInfo:
      $ref: 'schemas/catalog.yaml#/CatalogInfo'
    SchemaDetail:
      $ref: 'schemas/catalog.yaml#/SchemaDetail'
    CreateSchemaRequest:
      $ref: 'schemas/catalog.yaml#/CreateSchemaRequest'
    UpdateSchemaRequest:
      $ref: 'schemas/catalog.yaml#/UpdateSchemaRequest'
    UpdateTableRequest:
      $ref: 'schemas/catalog.yaml#/UpdateTableRequest'
    UpdateCatalogRequest:
      $ref: 'schemas/catalog.yaml#/UpdateCatalogRequest'
    PaginatedSchemaDetails:
      $ref: 'schemas/catalog.yaml#/PaginatedSchemaDetails'
    TableDetail:
      $ref: 'schemas/catalog.yaml#/TableDetail'
    ColumnDetail:
      $ref: 'schemas/catalog.yaml#/ColumnDetail'
    CreateTableRequest:
      $ref: 'schemas/catalog.yaml#/CreateTableRequest'
    CreateColumnRequest:
      $ref: 'schemas/catalog.yaml#/CreateColumnRequest'
    UpdateColumnRequest:
      $ref: 'schemas/catalog.yaml#/UpdateColumnRequest'
    PaginatedTableDetails:
      $ref: 'schemas/catalog.yaml#/PaginatedTableDetails'
    PaginatedColumnDetails:
      $ref: 'schemas/catalog.yaml#/PaginatedColumnDetails'
    TableStatistics:
      $ref: 'schemas/catalog.yaml#/TableStatistics'
    MetastoreSummary:
      $ref: 'schemas/catalog.yaml#/MetastoreSummary'
    QueryHistoryEntry:
      $ref: 'schemas/observability.yaml#/QueryHistoryEntry'
    PaginatedQueryHistoryEntries:
      $ref: 'schemas/observability.yaml#/PaginatedQueryHistoryEntries'
    SearchResult:
      $ref: 'schemas/governance.yaml#/SearchResult'
    PaginatedSearchResults:
      $ref: 'schemas/governance.yaml#/PaginatedSearchResults'
    LineageEdge:
      $ref: 'schemas/lineage.yaml#/LineageEdge'
    LineageNode:
      $ref: 'schemas/lineage.yaml#/LineageNode'
    PaginatedLineageEdges:
      $ref: 'schemas/lineage.yaml#/PaginatedLineageEdges'
    PurgeLineageRequest:
      $ref: 'schemas/lineage.yaml#/PurgeLineageRequest'
    PurgeLineageResponse:
      $ref: 'schemas/lineage.yaml#/PurgeLineageResponse'
    Tag:
      $ref: 'schemas/governance.yaml#/Tag'
    CreateTagRequest:
      $ref: 'schemas/governance.yaml#/CreateTagRequest'
    TagAssignment:
      $ref: 'schemas/governance.yaml#/TagAssignment'
    CreateTagAssignmentRequest:
      $ref: 'schemas/governance.yaml#/CreateTagAssignmentRequest'
    PaginatedTags:
      $ref: 'schemas/governance.yaml#/PaginatedTags'
    ViewDetail:
      $ref: 'schemas/catalog.yaml#/ViewDetail'
    CreateViewRequest:
      $ref: 'schemas/catalog.yaml#/CreateViewRequest'
    UpdateViewRequest:
      $ref: 'schemas/catalog.yaml#/UpdateViewRequest'
    PaginatedViewDetails:
      $ref: 'schemas/catalog.yaml#/PaginatedViewDetails'
    StorageCredential:
      $ref: 'schemas/storage.yaml#/StorageCredential'
    CreateStorageCredentialRequest:
      $ref: 'schemas/storage.yaml#/CreateStorageCredentialRequest'
    UpdateStorageCredentialRequest:
      $ref: 'schemas/storage.yaml#/UpdateStorageCredentialRequest'
    PaginatedStorageCredentials:
      $ref: 'schemas/storage.yaml#/PaginatedStorageCredentials'
    ExternalLocation:
      $ref: 'schemas/storage.yaml#/ExternalLocation'
    CreateExternalLocationRequest:
      $ref: 'schemas/storage.yaml#/CreateExternalLocationRequest'
    UpdateExternalLocationRequest:
      $ref: 'schemas/storage.yaml#/UpdateExternalLocationRequest'
    PaginatedExternalLocations:
      $ref: 'schemas/storage.yaml#/PaginatedExternalLocations'
    VolumeDetail:
      $ref: 'schemas/catalog.yaml#/VolumeDetail'
    CreateVolumeRequest:
      $ref: 'schemas/catalog.yaml#/CreateVolumeRequest'
    UpdateVolumeRequest:
      $ref: 'schemas/catalog.yaml#/UpdateVolumeRequest'
    PaginatedVolumes:
      $ref: 'schemas/catalog.yaml#/PaginatedVolumes'
    UploadUrlRequest:
      $ref: 'schemas/ingestion.yaml#/UploadUrlRequest'
    UploadUrlResponse:
      $ref: 'schemas/ingestion.yaml#/UploadUrlResponse'
    IngestionOptions:
      $ref: 'schemas/ingestion.yaml#/IngestionOptions'
    CommitIngestionRequest:
      $ref: 'schemas/ingestion.yaml#/CommitIngestionRequest'
    LoadExternalRequest:
      $ref: 'schemas/ingestion.yaml#/LoadExternalRequest'
    IngestionResult:
      $ref: 'schemas/ingestion.yaml#/IngestionResult'
    ComputeEndpoint:
      $ref: 'schemas/compute.yaml#/ComputeEndpoint'
    CreateComputeEndpointRequest:
      $ref: 'schemas/compute.yaml#/CreateComputeEndpointRequest'
    UpdateComputeEndpointRequest:
      $ref: 'schemas/compute.yaml#/UpdateComputeEndpointRequest'
    PaginatedComputeEndpoints:
      $ref: 'schemas/compute.yaml#/PaginatedComputeEndpoints'
    ComputeAssignment:
      $ref: 'schemas/compute.yaml#/ComputeAssignment'
    CreateComputeAssignmentRequest:
      $ref: 'schemas/compute.yaml#/CreateComputeAssignmentRequest'
    PaginatedComputeAssignments:
      $ref: 'schemas/compute.yaml#/PaginatedComputeAssignments'
    ComputeEndpointHealth:
      $ref: 'schemas/compute.yaml#/ComputeEndpointHealth'

paths:
  /query:
    $ref: 'paths/query.yaml#/paths/~1query'
  /principals:
    $ref: 'paths/security.yaml#/paths/~1principals'
  /principals/{principalId}:
    $ref: 'paths/security.yaml#/paths/~1principals~1{principalId}'
  /principals/{principalId}/admin:
    $ref: 'paths/security.yaml#/paths/~1principals~1{principalId}~1admin'
  /groups:
    $ref: 'paths/security.yaml#/paths/~1groups'
  /groups/{groupId}:
    $ref: 'paths/security.yaml#/paths/~1groups~1{groupId}'
  /groups/{groupId}/members:
    $ref: 'paths/security.yaml#/paths/~1groups~1{groupId}~1members'
  /grants:
    $ref: 'paths/security.yaml#/paths/~1grants'
  /grants/{grantId}:
    $ref: 'paths/security.yaml#/paths/~1grants~1{grantId}'
  /api-keys:
    $ref: 'paths/security.yaml#/paths/~1api-keys'
  /api-keys/{apiKeyId}:
    $ref: 'paths/security.yaml#/paths/~1api-keys~1{apiKeyId}'
  /api-keys/cleanup:
    $ref: 'paths/security.yaml#/paths/~1api-keys~1cleanup'
  /tables/{tableId}/row-filters:
    $ref: 'paths/security.yaml#/paths/~1tables~1{tableId}~1row-filters'
  /row-filters/{rowFilterId}:
    $ref: 'paths/security.yaml#/paths/~1row-filters~1{rowFilterId}'
  /row-filters/{rowFilterId}/bindings:
    $ref: 'paths/security.yaml#/paths/~1row-filters~1{rowFilterId}~1bindings'
  /row-filters:
    $ref: 'paths/security.yaml#/paths/~1row-filters'
  /tables/{tableId}/column-masks:
    $ref: 'paths/security.yaml#/paths/~1tables~1{tableId}~1column-masks'
  /column-masks/{columnMaskId}:
    $ref: 'paths/security.yaml#/paths/~1column-masks~1{columnMaskId}'
  /column-masks/{columnMaskId}/bindings:
    $ref: 'paths/security.yaml#/paths/~1column-masks~1{columnMaskId}~1bindings'
  /manifest:
    $ref: 'paths/observability.yaml#/paths/~1manifest'
  /audit-logs:
    $ref: 'paths/observability.yaml#/paths/~1audit-logs'
  /catalog:
    $ref: 'paths/catalog.yaml#/paths/~1catalog'
  /catalog/schemas:
    $ref: 'paths/catalog.yaml#/paths/~1catalog~1schemas'
  /catalog/schemas/{schemaName}:
    $ref: 'paths/catalog.yaml#/paths/~1catalog~1schemas~1{schemaName}'
  /catalog/schemas/{schemaName}/tables:
    $ref: 'paths/catalog.yaml#/paths/~1catalog~1schemas~1{schemaName}~1tables'
  /catalog/schemas/{schemaName}/tables/{tableName}:
    $ref: 'paths/catalog.yaml#/paths/~1catalog~1schemas~1{schemaName}~1tables~1{tableName}'
  /catalog/schemas/{schemaName}/tables/{tableName}/columns:
    $ref: 'paths/catalog.yaml#/paths/~1catalog~1schemas~1{schemaName}~1tables~1{tableName}~1columns'
  /catalog/schemas/{schemaName}/tables/{tableName}/columns/{columnName}:
    $ref: 'paths/catalog.yaml#/paths/~1catalog~1schemas~1{schemaName}~1tables~1{tableName}~1columns~1{columnName}'
  /catalog/schemas/{schemaName}/tables/{tableName}/profile:
    $ref: 'paths/catalog.yaml#/paths/~1catalog~1schemas~1{schemaName}~1tables~1{tableName}~1profile'
  /metastore/summary:
    $ref: 'paths/observability.yaml#/paths/~1metastore~1summary'
  /query-history:
    $ref: 'paths/observability.yaml#/paths/~1query-history'
  /search:
    $ref: 'paths/governance.yaml#/paths/~1search'
  /lineage/tables/{schemaName}/{tableName}:
    $ref: 'paths/lineage.yaml#/paths/~1lineage~1tables~1{schemaName}~1{tableName}'
  /lineage/tables/{schemaName}/{tableName}/upstream:
    $ref: 'paths/lineage.yaml#/paths/~1lineage~1tables~1{schemaName}~1{tableName}~1upstream'
  /lineage/tables/{schemaName}/{tableName}/downstream:
    $ref: 'paths/lineage.yaml#/paths/~1lineage~1tables~1{schemaName}~1{tableName}~1downstream'
  /lineage/edges/{edgeId}:
    $ref: 'paths/lineage.yaml#/paths/~1lineage~1edges~1{edgeId}'
  /lineage/purge:
    $ref: 'paths/lineage.yaml#/paths/~1lineage~1purge'
  /tags:
    $ref: 'paths/governance.yaml#/paths/~1tags'
  /tags/{tagId}:
    $ref: 'paths/governance.yaml#/paths/~1tags~1{tagId}'
  /tags/{tagId}/assignments:
    $ref: 'paths/governance.yaml#/paths/~1tags~1{tagId}~1assignments'
  /tag-assignments/{assignmentId}:
    $ref: 'paths/governance.yaml#/paths/~1tag-assignments~1{assignmentId}'
  /classifications:
    $ref: 'paths/governance.yaml#/paths/~1classifications'
  /catalog/schemas/{schemaName}/views:
    $ref: 'paths/catalog.yaml#/paths/~1catalog~1schemas~1{schemaName}~1views'
  /catalog/schemas/{schemaName}/views/{viewName}:
    $ref: 'paths/catalog.yaml#/paths/~1catalog~1schemas~1{schemaName}~1views~1{viewName}'
  /catalog/schemas/{schemaName}/tables/{tableName}/ingestion/upload-url:
    $ref: 'paths/ingestion.yaml#/paths/~1catalog~1schemas~1{schemaName}~1tables~1{tableName}~1ingestion~1upload-url'
  /catalog/schemas/{schemaName}/tables/{tableName}/ingestion/commit:
    $ref: 'paths/ingestion.yaml#/paths/~1catalog~1schemas~1{schemaName}~1tables~1{tableName}~1ingestion~1commit'
  /catalog/schemas/{schemaName}/tables/{tableName}/ingestion/load:
    $ref: 'paths/ingestion.yaml#/paths/~1catalog~1schemas~1{schemaName}~1tables~1{tableName}~1ingestion~1load'
  /storage-credentials:
    $ref: 'paths/storage.yaml#/paths/~1storage-credentials'
  /storage-credentials/{credentialName}:
    $ref: 'paths/storage.yaml#/paths/~1storage-credentials~1{credentialName}'
  /external-locations:
    $ref: 'paths/storage.yaml#/paths/~1external-locations'
  /external-locations/{locationName}:
    $ref: 'paths/storage.yaml#/paths/~1external-locations~1{locationName}'
  /catalog/schemas/{schemaName}/volumes:
    $ref: 'paths/catalog.yaml#/paths/~1catalog~1schemas~1{schemaName}~1volumes'
  /catalog/schemas/{schemaName}/volumes/{volumeName}:
    $ref: 'paths/catalog.yaml#/paths/~1catalog~1schemas~1{schemaName}~1volumes~1{volumeName}'
  /compute-endpoints:
    $ref: 'paths/compute.yaml#/paths/~1compute-endpoints'
  /compute-endpoints/{endpointName}:
    $ref: 'paths/compute.yaml#/paths/~1compute-endpoints~1{endpointName}'
  /compute-endpoints/{endpointName}/assignments:
    $ref: 'paths/compute.yaml#/paths/~1compute-endpoints~1{endpointName}~1assignments'
  /compute-endpoints/{endpointName}/health:
    $ref: 'paths/compute.yaml#/paths/~1compute-endpoints~1{endpointName}~1health'
  /compute-endpoints/{endpointName}/assignments/{assignmentId}:
    $ref: 'paths/compute.yaml#/paths/~1compute-endpoints~1{endpointName}~1assignments~1{assignmentId}'

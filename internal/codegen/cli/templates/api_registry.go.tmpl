// Code generated by cli-gen. DO NOT EDIT.
package gen

// APIEndpoint represents a single API endpoint for discovery.
type APIEndpoint struct {
	OperationID string     `json:"operation_id"`
	Method      string     `json:"method"`
	Path        string     `json:"path"`
	Summary     string     `json:"summary"`
	Description string     `json:"description,omitempty"`
	Authz       APIAuthz   `json:"authz,omitempty"`
	Tags        []string   `json:"tags,omitempty"`
	Parameters  []APIParam `json:"parameters,omitempty"`
	BodyFields  []APIField `json:"body_fields,omitempty"`
	CLICommand  string     `json:"cli_command,omitempty"`
}

// APIAuthz represents endpoint authorization metadata from OpenAPI x-authz.
type APIAuthz struct {
	Mode        string          `json:"mode,omitempty"`
	OwnerBypass bool            `json:"owner_bypass,omitempty"`
	Checks      []APIAuthzCheck `json:"checks,omitempty"`
}

// APIAuthzCheck represents one required authorization check.
type APIAuthzCheck struct {
	SecurableType     string `json:"securable_type"`
	Privilege         string `json:"privilege"`
	SecurableIDSource string `json:"securable_id_source"`
}

// APIParam represents an API parameter for discovery.
type APIParam struct {
	Name     string   `json:"name"`
	In       string   `json:"in"`
	Type     string   `json:"type"`
	Required bool     `json:"required,omitempty"`
	Enum     []string `json:"enum,omitempty"`
}

// APIField represents a request body field for discovery.
type APIField struct {
	Name     string   `json:"name"`
	Type     string   `json:"type"`
	Required bool     `json:"required,omitempty"`
	Enum     []string `json:"enum,omitempty"`
}

// APIEndpoints contains all API endpoints from the OpenAPI spec.
var APIEndpoints = []APIEndpoint{
{{- range .}}
	{
		OperationID: {{quote .OperationID}},
		Method:      {{quote .Method}},
		Path:        {{quote .Path}},
		Summary:     {{quote .Summary}},
		Description: {{quote .Description}},
		{{- if .Authz.Mode}}
		Authz: APIAuthz{
			Mode: {{quote .Authz.Mode}},
			OwnerBypass: {{.Authz.OwnerBypass}},
			{{- if .Authz.Checks}}
			Checks: []APIAuthzCheck{
				{{- range .Authz.Checks}}
				{SecurableType: {{quote .SecurableType}}, Privilege: {{quote .Privilege}}, SecurableIDSource: {{quote .SecurableIDSource}}},
				{{- end}}
			},
			{{- end}}
		},
		{{- end}}
		{{- if .Tags}}
		Tags:        []string{ {{- range $i, $t := .Tags}}{{if $i}}, {{end}}{{quote $t}}{{end -}} },
		{{- end}}
		{{- if .Parameters}}
		Parameters: []APIParam{
			{{- range .Parameters}}
			{Name: {{quote .Name}}, In: {{quote .In}}, Type: {{quote .Type}}, Required: {{.Required}}{{if .Enum}}, Enum: []string{ {{- range $i, $e := .Enum}}{{if $i}}, {{end}}{{quote $e}}{{end -}} }{{end}}},
			{{- end}}
		},
		{{- end}}
		{{- if .BodyFields}}
		BodyFields: []APIField{
			{{- range .BodyFields}}
			{Name: {{quote .Name}}, Type: {{quote .Type}}, Required: {{.Required}}{{if .Enum}}, Enum: []string{ {{- range $i, $e := .Enum}}{{if $i}}, {{end}}{{quote $e}}{{end -}} }{{end}}},
			{{- end}}
		},
		{{- end}}
		{{- if .CLICommand}}
		CLICommand: {{quote .CLICommand}},
		{{- end}}
	},
{{- end}}
}
